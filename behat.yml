default:
  calls:
    error_reporting: 16383 # E_ALL & ~E_USER_DREPRECATED
  suites:
    default:
      contexts:
        - FeatureContext: { doctrine: "@doctrine", phoneNumberUtil: "@libphonenumber.phone_number_util", fixturesLoader: "@fidry_alice_data_fixtures.loader.doctrine" }
        - Behat\MinkExtension\Context\MinkContext
        - Behatch\Context\RestContext
        - Behatch\Context\JsonContext
  extensions:
    Behat\Symfony2Extension:
      kernel:
        env: "test"
        debug: "true"
    Behat\MinkExtension:
      # FIXME Use BEHAT_PARAMS in docker-compose.yml
      # http://behat.org/en/latest/user_guide/configuration.html#environment-variable-behat-params
      # base_url: "http://nginx:80/"
      base_url: "http://127.0.0.1:8080"
      default_session: "default"
      javascript_session: "selenium2"
      sessions:
        default:
          symfony2: ~
        selenium2:
          selenium2:
            browser: "chrome"
            # wd_host: "http://selenium:4444/wd/hub"
            wd_host: "http://localhost:4444/wd/hub"
    Behatch\Extension: ~

# # FIXME Use BEHAT_PARAMS
# # http://behat.org/en/latest/user_guide/configuration.html#environment-variable-behat-params
# travis:
#   extensions:
#     Behat\MinkExtension:
#       base_url: "http://127.0.0.1:8080"
#       selenium2:
#         wd_host: "http://localhost:4444/wd/hub"
#         # wd_host: "http://localhost:8643/wd/hub"
#         # capabilities:
#         #   chrome:
#         #     switches:
#         #       - "--headless"
#         #       - "--disable-gpu"
#         #       - "--no-sandbox"
